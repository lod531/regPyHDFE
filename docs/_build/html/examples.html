

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>:Examples &mdash; regpyhdfe  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="regpyhdfe package" href="regpyhdfe.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> regpyhdfe
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="regpyhdfe.html">regpyhdfe package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">:Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation-usage">Installation/Usage:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#search-for-device-connect-and-read-characteristic">Search for device, connect and read characteristic</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">regpyhdfe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>:Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<h1>:Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation-usage">
<h2>Installation/Usage:<a class="headerlink" href="#installation-usage" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">regpyhdfe</span></code>, simple as that</p>
</div>
<div class="section" id="search-for-device-connect-and-read-characteristic">
<h2>Search for device, connect and read characteristic<a class="headerlink" href="#search-for-device-connect-and-read-characteristic" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="n">regpyhdfe</span> <span class="kn">import</span> <span class="nn">Regpyhdfe</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;data/cleaned_nlswork.dta&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;hours_log&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hours&#39;</span><span class="p">])</span>
<span class="n">regpyhdfe</span> <span class="o">=</span> <span class="n">Regpyhdfe</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                                                <span class="n">target</span><span class="o">=</span><span class="s1">&#39;ttl_exp&#39;</span><span class="p">,</span>
                                                <span class="n">predictors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wks_ue&#39;</span><span class="p">,</span> <span class="s1">&#39;tenure&#39;</span><span class="p">],</span>
                                                <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;idcode&#39;</span><span class="p">],</span>
                                                <span class="n">cluster_ids</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;idcode&#39;</span><span class="p">])</span>

<span class="c1"># (dropped 884 singleton observations)</span>
<span class="c1"># (MWFE estimator converged in 1 iterations)</span>
<span class="c1">#</span>
<span class="c1"># HDFE Linear regression                            Number of obs   =     12,568</span>
<span class="c1"># Absorbing 1 HDFE group                            F(   2,     11) =     114.58</span>
<span class="c1"># Statistics robust to heteroskedasticity           Prob &gt; F        =     0.0000</span>
<span class="c1">#                                                   R-squared       =     0.6708</span>
<span class="c1">#                                                   Adj R-squared   =     0.5628</span>
<span class="c1"># Number of clusters (year)    =         12         Within R-sq.    =     0.4536</span>
<span class="c1"># Number of clusters (idcode)  =      3,102         Root MSE        =     2.8836</span>
<span class="c1">#</span>
<span class="c1">#                            (Std. Err. adjusted for 12 clusters in year idcode)</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#              |               Robust</span>
<span class="c1">#      ttl_exp |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span class="c1"># -------------+----------------------------------------------------------------</span>
<span class="c1">#       wks_ue |   .0306653   .0155436     1.97   0.074    -.0035459    .0648765</span>
<span class="c1">#       tenure |   .8513953   .0663892    12.82   0.000     .7052737    .9975169</span>
<span class="c1">#        _cons |   3.784107   .4974451     7.61   0.000     2.689238    4.878976</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#</span>
<span class="c1"># Absorbed degrees of freedom:</span>
<span class="c1"># -----------------------------------------------------+</span>
<span class="c1">#  Absorbed FE | Categories  - Redundant  = Num. Coefs |</span>
<span class="c1"># -------------+---------------------------------------|</span>
<span class="c1">#       idcode |      3102        3102           0    *|</span>
<span class="c1"># -----------------------------------------------------+</span>
<span class="c1"># * = FE nested within cluster; treated as redundant for DoF computation</span>

<span class="c1">#                                  OLS Regression Results</span>
<span class="c1"># =======================================================================================</span>
<span class="c1"># Dep. Variable:                ttl_exp   R-squared (uncentered):                   0.454</span>
<span class="c1"># Model:                            OLS   Adj. R-squared (uncentered):           -623.342</span>
<span class="c1"># Method:                 Least Squares   F-statistic:                              114.8</span>
<span class="c1"># Date:                Mon, 11 Jan 2021   Prob (F-statistic):                    4.28e-08</span>
<span class="c1"># Time:                        21:35:07   Log-Likelihood:                         -29361.</span>
<span class="c1"># No. Observations:               12568   AIC:                                  5.873e+04</span>
<span class="c1"># Df Residuals:                      11   BIC:                                  5.874e+04</span>
<span class="c1"># Df Model:                           2</span>
<span class="c1"># Covariance Type:              cluster</span>
<span class="c1"># ==============================================================================</span>
<span class="c1">#                  coef    std err          z      P&gt;|z|      [0.025      0.975]</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># wks_ue         0.0307      0.016      1.975      0.048       0.000       0.061</span>
<span class="c1"># tenure         0.8514      0.066     12.831      0.000       0.721       0.981</span>
<span class="c1"># ==============================================================================</span>
<span class="c1"># Omnibus:                     2467.595   Durbin-Watson:                   1.819</span>
<span class="c1"># Prob(Omnibus):                  0.000   Jarque-Bera (JB):             8034.980</span>
<span class="c1"># Skew:                           0.993   Prob(JB):                         0.00</span>
<span class="c1"># Kurtosis:                       6.376   Cond. No.                         2.06</span>
<span class="c1"># ==============================================================================</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">regpyhdfe</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">regpyhdfe</span> <span class="kn">import</span> <span class="n">Regpyhdfe</span>

<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_boston</span>

<span class="k">def</span> <span class="nf">sklearn_to_df</span><span class="p">(</span><span class="n">sklearn_dataset</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sklearn_dataset</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">sklearn_dataset</span><span class="o">.</span><span class="n">feature_names</span><span class="p">)</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">sklearn_dataset</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">sklearn_to_df</span><span class="p">(</span><span class="n">load_boston</span><span class="p">())</span>

<span class="n">df</span><span class="o">.</span><span class="n">to_stata</span><span class="p">(</span><span class="s2">&quot;boston.dta&quot;</span><span class="p">)</span>
<span class="c1"># . reghdfe target CRIM ZN INDUS NOX AGE, absorb(CHAS RAD)</span>
<span class="c1"># (MWFE estimator converged in 3 iterations)</span>
<span class="c1">#</span>
<span class="c1"># HDFE Linear regression                            Number of obs   =        506</span>
<span class="c1"># Absorbing 2 HDFE groups                           F(   5,    491) =      21.93</span>
<span class="c1">#                                                   Prob &gt; F        =     0.0000</span>
<span class="c1">#                                                   R-squared       =     0.3887</span>
<span class="c1">#                                                   Adj R-squared   =     0.3712</span>
<span class="c1">#                                                   Within R-sq.    =     0.1825</span>
<span class="c1">#                                                   Root MSE        =     7.2929</span>
<span class="c1">#</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#       target |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span class="c1"># -------------+----------------------------------------------------------------</span>
<span class="c1">#         CRIM |  -.2089114   .0491012    -4.25   0.000    -.3053857   -.1124371</span>
<span class="c1">#           ZN |   .0679261   .0183051     3.71   0.000       .03196    .1038922</span>
<span class="c1">#        INDUS |  -.2279553   .0860909    -2.65   0.008    -.3971074   -.0588033</span>
<span class="c1">#          NOX |  -9.424849   5.556005    -1.70   0.090    -20.34133     1.49163</span>
<span class="c1">#          AGE |  -.0140739   .0183467    -0.77   0.443    -.0501215    .0219738</span>
<span class="c1">#        _cons |   31.24755    2.53596    12.32   0.000     26.26487    36.23022</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#</span>
<span class="c1"># Absorbed degrees of freedom:</span>
<span class="c1"># -----------------------------------------------------+</span>
<span class="c1">#  Absorbed FE | Categories  - Redundant  = Num. Coefs |</span>
<span class="c1"># -------------+---------------------------------------|</span>
<span class="c1">#         CHAS |         2           0           2     |</span>
<span class="c1">#          RAD |         9           1           8     |</span>
<span class="c1"># -----------------------------------------------------+</span>

<span class="c1"># target~CRIM + ZN + INDUS + NOX + AGE, absorb(CHAS, RAD)</span>
<span class="c1">#                                  OLS Regression Results</span>
<span class="c1"># =======================================================================================</span>
<span class="c1"># Dep. Variable:                 target   R-squared (uncentered):                   0.183</span>
<span class="c1"># Model:                            OLS   Adj. R-squared (uncentered):              0.158</span>
<span class="c1"># Method:                 Least Squares   F-statistic:                              21.93</span>
<span class="c1"># Date:                Mon, 11 Jan 2021   Prob (F-statistic):                    7.57e-20</span>
<span class="c1"># Time:                        20:30:53   Log-Likelihood:                         -1715.7</span>
<span class="c1"># No. Observations:                 506   AIC:                                      3441.</span>
<span class="c1"># Df Residuals:                     491   BIC:                                      3463.</span>
<span class="c1"># Df Model:                           5</span>
<span class="c1"># Covariance Type:            nonrobust</span>
<span class="c1"># ==============================================================================</span>
<span class="c1">#                  coef    std err          t      P&gt;|t|      [0.025      0.975]</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># CRIM          -0.2089      0.049     -4.255      0.000      -0.305      -0.112</span>
<span class="c1"># ZN             0.0679      0.018      3.711      0.000       0.032       0.104</span>
<span class="c1"># INDUS         -0.2280      0.086     -2.648      0.008      -0.397      -0.059</span>
<span class="c1"># NOX           -9.4248      5.556     -1.696      0.090     -20.341       1.492</span>
<span class="c1"># AGE           -0.0141      0.018     -0.767      0.443      -0.050       0.022</span>
<span class="c1"># ==============================================================================</span>
<span class="c1"># Omnibus:                      172.457   Durbin-Watson:                   0.904</span>
<span class="c1"># Prob(Omnibus):                  0.000   Jarque-Bera (JB):              532.297</span>
<span class="c1"># Skew:                           1.621   Prob(JB):                    2.59e-116</span>
<span class="c1"># Kurtosis:                       6.839   Cond. No.                         480.</span>
<span class="c1"># ==============================================================================</span>
<span class="c1">#</span>
<span class="c1"># Notes:</span>
<span class="c1"># [1] R² is computed without centering (uncentered) since the model does not contain a constant.</span>
<span class="c1"># [2] Standard Errors assume that the covariance matrix of the errors is correctly specified.</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Regpyhdfe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;CRIM&#39;</span><span class="p">,</span> <span class="s1">&#39;ZN&#39;</span><span class="p">,</span> <span class="s1">&#39;INDUS&#39;</span><span class="p">,</span> <span class="s1">&#39;NOX&#39;</span><span class="p">,</span> <span class="s1">&#39;AGE&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;CHAS&#39;</span><span class="p">,</span> <span class="s1">&#39;RAD&#39;</span><span class="p">])</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;target~CRIM + ZN + INDUS + NOX + AGE, absorb(CHAS, RAD)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">regpyhdfe</span> <span class="kn">import</span> <span class="n">Regpyhdfe</span>

<span class="c1"># details about dataset can be found at https://www.kaggle.com/crawford/80-cereals</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;/home/abom/Desktop/regPyHDFE/data/cereal.dta&#39;</span><span class="p">)</span>

<span class="c1"># . reghdfe rating fat protein carbo sugars, absorb(shelf)</span>
<span class="c1"># (MWFE estimator converged in 1 iterations)</span>
<span class="c1">#</span>
<span class="c1"># HDFE Linear regression                            Number of obs   =         77</span>
<span class="c1"># Absorbing 1 HDFE group                            F(   4,     70) =      54.98</span>
<span class="c1">#                                                   Prob &gt; F        =     0.0000</span>
<span class="c1">#                                                   R-squared       =     0.7862</span>
<span class="c1">#                                                   Adj R-squared   =     0.7679</span>
<span class="c1">#                                                   Within R-sq.    =     0.7586</span>
<span class="c1">#                                                   Root MSE        =     6.7671</span>
<span class="c1">#</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#       rating |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span class="c1"># -------------+----------------------------------------------------------------</span>
<span class="c1">#          fat |  -5.684196   .8801468    -6.46   0.000    -7.439594   -3.928799</span>
<span class="c1">#      protein |   3.740386   .8430319     4.44   0.000     2.059012     5.42176</span>
<span class="c1">#        carbo |  -.7892276   .2041684    -3.87   0.000    -1.196429   -.3820266</span>
<span class="c1">#       sugars |   -2.03286   .2179704    -9.33   0.000    -2.467588   -1.598132</span>
<span class="c1">#        _cons |   64.49503    4.92674    13.09   0.000     54.66896     74.3211</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#</span>
<span class="c1"># Absorbed degrees of freedom:</span>
<span class="c1"># -----------------------------------------------------+</span>
<span class="c1">#  Absorbed FE | Categories  - Redundant  = Num. Coefs |</span>
<span class="c1"># -------------+---------------------------------------|</span>
<span class="c1">#        shelf |         3           0           3     |</span>
<span class="c1"># -----------------------------------------------------+</span>

<span class="c1"># rating ~ fat + protein + carbo + sugars, absorb(shelf)</span>
<span class="c1">#                                  OLS Regression Results</span>
<span class="c1"># =======================================================================================</span>
<span class="c1"># Dep. Variable:                 rating   R-squared (uncentered):                   0.759</span>
<span class="c1"># Model:                            OLS   Adj. R-squared (uncentered):              0.734</span>
<span class="c1"># Method:                 Least Squares   F-statistic:                              54.98</span>
<span class="c1"># Date:                Mon, 11 Jan 2021   Prob (F-statistic):                    6.89e-21</span>
<span class="c1"># Time:                        20:45:37   Log-Likelihood:                         -252.82</span>
<span class="c1"># No. Observations:                  77   AIC:                                      513.6</span>
<span class="c1"># Df Residuals:                      70   BIC:                                      523.0</span>
<span class="c1"># Df Model:                           4</span>
<span class="c1"># Covariance Type:            nonrobust</span>
<span class="c1">#                  coef    std err          t      P&gt;|t|      [0.025      0.975]</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># fat           -5.6842      0.880     -6.458      0.000      -7.440      -3.929</span>
<span class="c1"># protein        3.7404      0.843      4.437      0.000       2.059       5.422</span>
<span class="c1"># carbo         -0.7892      0.204     -3.866      0.000      -1.196      -0.382</span>
<span class="c1"># sugars        -2.0329      0.218     -9.326      0.000      -2.468      -1.598</span>
<span class="c1"># ==============================================================================</span>
<span class="c1"># Omnibus:                        5.613   Durbin-Watson:                   1.801</span>
<span class="c1"># Prob(Omnibus):                  0.060   Jarque-Bera (JB):                7.673</span>
<span class="c1"># Skew:                           0.179   Prob(JB):                       0.0216</span>
<span class="c1"># Kurtosis:                       4.504   Cond. No.                         5.84</span>
<span class="c1"># ==============================================================================</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">residualized</span> <span class="o">=</span> <span class="n">Regpyhdfe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;fat&#39;</span><span class="p">,</span> <span class="s1">&#39;protein&#39;</span><span class="p">,</span> <span class="s1">&#39;carbo&#39;</span><span class="p">,</span> <span class="s1">&#39;sugars&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;shelf&#39;</span><span class="p">])</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">residualized</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;rating ~ fat + protein + carbo + sugars, absorb(shelf)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>


<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">regpyhdfe</span> <span class="kn">import</span> <span class="n">Regpyhdfe</span>
<span class="c1"># show variable labels</span>
<span class="c1">#pd.read_stata(&#39;/home/abom/Desktop/regPyHDFE/nlswork.dta&#39;, iterator=True).variable_labels()</span>

<span class="c1"># Load data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;/home/abom/Desktop/regPyHDFE/data/cleaned_nlswork.dta&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;hours_log&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hours&#39;</span><span class="p">])</span>

<span class="c1"># algo = pyhdfe.create(df, [&#39;idcode&#39;, &#39;year&#39;])</span>
<span class="c1"># residualized = Reg[yhdfe(df, [&#39;ln_wage&#39;, &#39;hours_log&#39;], False))</span>
<span class="c1"># . reghdfe ln_wage hours_log, absorb(idcode year)</span>
<span class="c1"># (dropped 884 singleton observations)</span>
<span class="c1"># (MWFE estimator converged in 8 iterations)</span>
<span class="c1">#</span>
<span class="c1"># HDFE Linear regression                            Number of obs   =     12,568</span>
<span class="c1"># Absorbing 2 HDFE groups                           F(   1,   9454) =       0.50</span>
<span class="c1">#                                                   Prob &gt; F        =     0.4792</span>
<span class="c1">#                                                   R-squared       =     0.7314</span>
<span class="c1">#                                                   Adj R-squared   =     0.6430</span>
<span class="c1">#                                                   Within R-sq.    =     0.0001</span>
<span class="c1">#                                                   Root MSE        =     0.2705</span>
<span class="c1">#</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#      ln_wage |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span class="c1"># -------------+----------------------------------------------------------------</span>
<span class="c1">#    hours_log |  -.0058555   .0082759    -0.71   0.479     -.022078     .010367</span>
<span class="c1">#        _cons |   1.736618   .0292873    59.30   0.000     1.679208    1.794027</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1">#</span>
<span class="c1"># Absorbed degrees of freedom:</span>
<span class="c1"># -----------------------------------------------------+</span>
<span class="c1">#  Absorbed FE | Categories  - Redundant  = Num. Coefs |</span>
<span class="c1"># -------------+---------------------------------------|</span>
<span class="c1">#       idcode |      3102           0        3102     |</span>
<span class="c1">#         year |        12           1          11     |</span>
<span class="c1"># -----------------------------------------------------+</span>

<span class="c1"># ln_wage ~ hours_log, absorb(idcode, year)</span>
<span class="c1">#                                  OLS Regression Results</span>
<span class="c1"># =======================================================================================</span>
<span class="c1"># Dep. Variable:                ln_wage   R-squared (uncentered):                   0.000</span>
<span class="c1"># Model:                            OLS   Adj. R-squared (uncentered):             -0.329</span>
<span class="c1"># Method:                 Least Squares   F-statistic:                             0.5006</span>
<span class="c1"># Date:                Mon, 11 Jan 2021   Prob (F-statistic):                       0.479</span>
<span class="c1"># Time:                        21:07:22   Log-Likelihood:                          386.59</span>
<span class="c1"># No. Observations:               12568   AIC:                                     -771.2</span>
<span class="c1"># Df Residuals:                    9454   BIC:                                     -763.7</span>
<span class="c1"># Df Model:                           1</span>
<span class="c1"># Covariance Type:            nonrobust</span>
<span class="c1"># ==============================================================================</span>
<span class="c1">#                  coef    std err          t      P&gt;|t|      [0.025      0.975]</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># hours_log     -0.0059      0.008     -0.708      0.479      -0.022       0.010</span>
<span class="c1"># ==============================================================================</span>
<span class="c1"># Omnibus:                     1617.122   Durbin-Watson:                   2.143</span>
<span class="c1"># Prob(Omnibus):                  0.000   Jarque-Bera (JB):            16984.817</span>
<span class="c1"># Skew:                          -0.215   Prob(JB):                         0.00</span>
<span class="c1"># Kurtosis:                       8.679   Cond. No.                         1.00</span>
<span class="c1"># ==============================================================================</span>


<span class="n">model</span> <span class="o">=</span> <span class="n">Regpyhdfe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;ln_wage&quot;</span><span class="p">,</span> <span class="s2">&quot;hours_log&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;idcode&quot;</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">])</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ln_wage ~ hours_log, absorb(idcode, year)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="regpyhdfe.html" class="btn btn-neutral float-left" title="regpyhdfe package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, andy.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>